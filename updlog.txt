{"logs":[{"title":"置顶内容：","values":["重要！4.5.1版本开始，授权机制调整！取消永久授权，改为会员扣费机制，扣费比例1%；","重要！原有的永久授权将在2025-06-15日全部封禁，永久授权可折算为服务费，具体看4.5.1升级日志；","重要！所有永久授权将在2025-09-30日后，无法再折算为服务费！","提示！如果您从4.4.5及以下版本升级，请一定要进飞机群获取 package.json 文件！",""]},{"title":"2025.09.30  更新4.7.4版本","values":["1、优化：重构核心底层的代码，协程能力加强，提升商城并发处理能力！","2、优化：游戏邮件默认线程数量增加至：50；","3、新增：商城主程序新增修改管理后台密码功能，在SSH中执行：cd /root/genshin_shop && ./main chkpwd","4、新增：管理后台的登录页面，新增“重置密码”按钮，该功能需提前在：管理后台-系统维护-邮件服务器设置 中，操作“设置邮箱SMTP规则”；","5、新增：定制功能更新，影响范围：newpay",""]},{"title":"2025.09.15  更新4.7.3版本","values":["1、调整：管理后台-系统维护 中的“数据库修复”功能，可以直接完成数据库修复；","2、优化：已知UI遗留问题优化；",""]},{"title":"2025.09.15  更新4.7.2版本","values":["1、优化：管理后台邮件、计划任务页面，增加、优化部分提示文本；","2、调整：邮件推送功能，调整为多线程模式，此模式下，要依据服务器配置、带宽等合理设置线程数量；","3、说明：线程数量在：管理后台-用户管理-游戏邮件管理 中修改，并不在邮件编辑窗口中修改；","4、新增：管理后台-用户管理-游戏邮件管理 中新增操作“线程数量”，可修改线程数量和超时时间；","5、修复：修复无法在线升级的问题，修复已发现的其他问题；",""]},{"title":"2025.09.14  更新4.7.1版本","values":["1、调整：管理后台登录状态改由：cookie+生命周期 维护，废弃URL中“password”的参数；","2、优化：本次升级后，限购相关的数据将一直保留，不会因为清理数据导致限购记录丢失；","3、新增：“资源类”的商品，增加了“玩家必得”属性，新增或编辑商品时，在“资源明细列表”中即可进行操作；","4、说明：商品只有在“资源几选几”大于0的情况下，“玩家必得”属性才会生效，影响范围：shop、freeshop；","5、调整：细化了 管理后台-系统维护-数据清理 的选项及提示说明文本；","6、新增：管理后台-用户管理 中，新增功能：游戏邮件管理，在这里可以创建要发送的邮件数据；","7、新增：管理后台-系统维护 中，新增功能：计划任务，发送邮件时，需要配合设置计划任务；","8、说明：如果不需要翻译机制，删除文件：/root/genshin_shop/wwwroot/template/message.json 即可；","9、修复：修复已知的UI问题；",""]},{"title":"2025.09.12  更新4.7.0版本","values":["1、调整：微调部分底层接口的错误类提示文本的内容；","2、新增：管理后台-系统维护 中，增加“数据库修复”功能，具体作用请点击查看；","3、优化：玩家注册商城账号时，允许使用邮箱作为账号（可关闭）；","4、说明：如需关闭邮箱作为账号注册，修改：mysql.ini 文件，在[gm]节点下， 添加：close_email = 1 ，重启即可；","5、修复：玩家注册商城账号时，修复验证码有效期逻辑不准确的问题；","6、调整：玩家注册商城账号时，默认不再限制大小写，将按照：[mysql.ini][gm][case] 的逻辑限制（可改回默认限制逻辑）；","7、说明：[mysql.ini][gm][case] 的具体逻辑说明，请查看商城目录：/root/genshin_shop 下的平台日志；","8、优化：管理后台-系统维护-查看重启命令，现在不受上层反射代理影响；","9、优化：商城“在线升级”功能优化，现在不受上层反射代理影响；","A、新增：增加了返回消息翻译机制，具体查阅：/root/genshin_shop/wwwroot/template/message-func2spec.txt","B、新增：定制内容上线（非定制会员不显示定制功能）；",""]},{"title":"2025.08.12  更新4.6.1版本","values":["1、修复：修复了一个非常隐秘的严重BUG，请务必升级到此版本！",""]},{"title":"2025.08.12  更新4.6.0版本","values":["1、优化：玩家在进行抽奖时，如果奖品明细不完整，将会返回错误信息，不再直接抽奖！","2、优化：路由访问优化，可忽略 index.html，例如：http://127.0.0.1:7777/admin 可直接打开管理后台登录页面；","3、新增：管理后台-充值管理-平台币CDK中，增加：删除、批量删除功能；","4、优化：商城“我的”、“商城”页面，头部图片显示策略调整，自适应图片显示高度最高为：200px；","5、说明：如果需要关闭第【4】条的优化，请修改：根目录/wwwroot/shop/gongyongmokuai.js 文件，第665行，将 do_not_switch 改为：!do_not_switch；","6、调整：商城“抽奖”页面，点击“查看抽奖”时，将弹出新的网页；",""]},{"title":"2025.06.22  更新4.5.9版本","values":["1、优化：优化了易支付收款回调解析逻辑，代码更健壮；","2、优化：管理后台的在线直充管理中，明确指明：只接入V1版的易支付；","3、优化：优化了JaPay收款回调解析逻辑，减少数据库链接数及性能开销；",""]},{"title":"2025.06.11  更新4.5.8版本","values":["1、优化：解决服务器时间、时区不匹配的问题，真正不再校验服务器时间；","2、说明：如果出现“时间戳误差超600秒”的提示，修改：mysql.ini文件，在[gm]节点下， 添加：is_ntp = 1 ，重启即可；",""]},{"title":"2025.06.09  更新4.5.7版本","values":["1、优化：内部代码优化，修复一处低概率的报错问题；",""]},{"title":"2025.06.07  更新4.5.6版本","values":["1、修复：修复一处“锁”的BUG，该BUG在某些场景下会引起玩家扣费异常！","请务必升级！（2025-06-10 4.5.5 版本将停止服务！）",""]},{"title":"2025.05.31  更新4.5.5版本","values":["升级时间较长，请耐心等待......","1、修复：修复小数精度引起的严重BUG：玩家 sign 异常！","2、优化：后台管理的用户管理中，查询时，可输入游戏账号、游戏UID进行查询；","3、优化：后台管理的设置新特性中，增加：图片压缩设置，可以开启或关闭图片压缩功能；",""]},{"title":"2025.05.24  更新4.5.4版本","values":["1、修复：修复购买0元商品或免费抽奖时，提示“拒绝处理 0 的情况！”的问题；",""]},{"title":"2025.05.24  更新4.5.3版本","values":["1、调整：玩家在充值平台币时新增了“立即支付”操作流程，苹果、安卓、PC三端均可正常弹出充值页面；",""]},{"title":"2025.05.24  更新4.5.2版本","values":["1、优化：提高代码的健壮性；","2、调整：不再强校验服务器时间！",""]},{"title":"2025.05.22  更新4.5.1版本","values":["1、优化：提高主程序的启动速度；","2、优化：延长获取在线公告的超时时间；","3、新增：管理后台页面的左上角，增加绑定会员功能操作入口；","4、调整：原有的永久授权CDK可以兑换服务费，具体规则请查阅功能操作入口页面；","5、说明：扣费比例1%，例如玩家通过CDK或三方通道充值了100元RMB，扣除服务费1元；","6、优化：开放“在线直充管理”的编辑限制，现在可以随意修改易支付三方的各项信息了；","7、新增：“在线直充管理”中增加：起始支付金额 字段，可同时添加多个不同起始金额的三方，充值时系统自动匹配通道；","8、调整：在同一个服务器中，商城解除启动限制，可以同时启动多个进程；","9、新增：系统维护-设置新特性中，增加充赠比参数设置；",""]},{"title":"2025.05.22  更新4.5.0版本","values":["1、修复：修复玩家领取月卡时没有领取结果显示的问题（此时已成功领取）；","2、修复：修复两个小概率的低风险bug；",""]},{"title":"2025.05.14  更新4.4.9版本","values":["1、优化：玩家商城中，不再显式无意义的类别；","2、优化：玩家商城中，充值平台币时增加“收银台”类别，选择此类别后可手动选择支付方式；",""]},{"title":"2025.04.26  更新4.4.8版本","values":["1、调整：微调部分文件的缓存机制；","2、优化：商城注册时，游戏账号默认与商城账号一致（也可手动输入）；","3、优化：微调商城注册界面UI及提示文本；","4、优化：调整部分校验策略，提高安全性；","5、新增：管理后台的用户管理中，新增：删除玩家仓库指定资源 操作入口，可删除指定玩家的指定仓库资源；",""]},{"title":"2025.04.24  更新4.4.7版本","values":["1、优化：在线公告页面，调整了公告显示方式；","2、优化：大幅优化商城（含免费商城）查询逻辑，其他内部代码逻辑优化；","3、公测：package.json 相关功能正式发布，开始公测，进飞机群：https://t.me/+k3RhhDf8WPI4ZmE1 获取文件；","4、调整：代理最大层级强制固定为9层，开通代理账号时，取消昵称的输入；","5、新增：商城新增仅允许通过代理链接注册参数，具体配置项请更新并运行商城后，查询日志；","6、优化：调整了易支付类三方回调的数据校验策略，兼容1.0、1、1等老版本，并在文件夹（平台日志）中增加日志类记录；","7、新增：玩家页面的：商城、免费商城中，增加按钮“加载更多”，分段式加载商城，大幅度降低服务器压力；","8、新增：商城配置文件：mysql.ini中，新增参数：“shop_total”，用于第【7】条更新；","说明：可在文件：mysql.ini的[basic]下，添加：shop_total = 10；10就是：每次加载的数量；",""]},{"title":"2025.04.21  更新4.4.6版本","values":["1、重构：大量的代码重构；","2、新增：商品默认图片、抽奖默认图片可以在“系统维护”-“设置新特性”中上传并启用缓存机制；","3、新增：package.json 配置文件，用于支持新4.0版的sdk数据库，同时扩展兼容变种数据库格式；(内测中)","说明：package.json文件对应不同版本的游戏端，配置是不同的，升级前一定要先获取 package.json 文件；","4、测试：抽奖相关功能测试无问题，请使用商城内置升级逻辑升级，而非直接修改数据库；","5、修复：商城无法通过邮件重置密码的问题；","6、剔除：剔除限速相关逻辑，每个接口请求频率：2毫秒/次；","7、调整：商城注册游戏账号，取消输入昵称；",""]},{"title":"2024.11.13  更新4.4.5版本","values":["1、修复：修复缓存类图片每次都需要从服务器获取的BUG；","2、新增：所有图片在上传时，自动进行大比例的体积压缩，降低服务器带宽开销；","3、UI优化：管理后台的多个页面中，在打开时自动进行查询操作；","4、优化：升级页面，将会判断商城是否升级重启成功，成功时将显示：“升级成功！”提示；","5、修复：修复管理后台的“充值管理”-“平台币CDK”页面，无法单独查询“已兑换”记录的问题；","6、商城优化：平台币充值与兑换，采用新的弹出方式，简化代码复杂度；","说明：本次UI更新较多，请务刷新页面；",""]},{"title":"2024.11.12  更新4.4.4版本","values":["1、新增：服务端版本增加：MySQL+SQLite版本，适用于某些3.6版本的服务端；","2、说明：MySQL+SQLite版本对应的【hk4e-emu.db】文件不能是加密的；","3、新增：管理后台每30分钟，检查是否有新版本，如果有新版本将置顶提示；","4、优化：优化商城注册页面某些提示文本不准确的情况；","5、UI优化：大幅优化管理后台“用户管理”-“玩家绑定设置”中各项提示文本；","6、优化：商城注册时，使用新的弹窗模式，确保验证码一定显示；","7、简化：商城注册时，简化多个非必要的参数，减少输入项目；","8、优化：商城启动时，增加：[mysql.ini][gm][case]参数说明，设置注册游戏账号时的大小写校验逻辑；",""]},{"title":"2024.11.9  更新4.4.3版本","values":["1、修复：修复玩家在仓库中，提取资源时报错的问题，此时资源仍可以正常提取；","2、优化：管理后台的“系统维护”中，“游戏端版本切换”不再显示3.2/3.4，而是显示：MySQL+芒果库 / MySQL+MySQL；","3、优化：商城配置文件：mysql.ini的基础设置中，部分参数说明信息及相关逻辑优化；","4、重构：重构了pref参数中limit参数的释义及相关功能逻辑；","5、优化：管理后台部分UI显示内容微调；","6、优化：更明确的错误提示；",""]},{"title":"2024.11.7  更新4.4.2版本","values":["1、修复：修复“福利”-“累充福利”中，某些（自定义类）福利提示已领取，但实际上并未领取的问题；",""]},{"title":"2024.11.6  更新4.4.1版本","values":["1、修复：修复在某些情况下，代理可提现平台币足够，但无法提现的问题；","2、说明：本次升级前如果删除过数据，那么已提现平台币数量将会有差异，但是不影响未提现的平台币数量！",""]},{"title":"2024.11.5  更新4.4.0版本","values":["1、调整：底层授权逻辑改变，4.3.8及以下版本的商城将停止服务；","2、优化：优化注册时验证码的生成与校验逻辑；","3、调整：玩家平台币余额不再强绑定进销存，现在可以随时清理数据了；","4、优化：“核心类的函数”改用redis库唯一锁的功能，避免重放攻击；（旧版本是通过其他方式的实现）","5、调整：代理后台、玩家商城，这两个板块，登录“Token”改为cookie记录，需代理、玩家重新登录；","6、优化：“代理后台”-“收益提现”页面，修正一处文本错误；","7、新增：管理后台的“系统维护”中，新增：“数据清理”功能；","说明：本次更新强制连接redis库！",""]},{"title":"4.0.0 版本 至 4.3.9 版本","values":["**更新日志不再显示**",""]},{"title":"2023.5.9  发布4.0.0版本","values":["发布全新的商城平台"]}]}