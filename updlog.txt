{"logs":[{"title":"2024.11.13  更新4.4.5版本","values":["1、修复：修复缓存类图片每次都需要从服务器获取的BUG；","2、新增：所有图片在上传时，自动进行大比例的体积压缩，降低服务器带宽开销；","3、UI优化：管理后台的多个页面中，在打开时自动进行查询操作；","4、优化：升级页面，将会判断商城是否升级重启成功，成功时将显示：“升级成功！”提示；","5、修复：修复管理后台的“充值管理”-“平台币CDK”页面，无法单独查询“已兑换”记录的问题；","6、商城优化：平台币充值与兑换，采用新的弹出方式，简化代码复杂度；","说明：本次UI更新较多，请务刷新页面；",""]},{"title":"2024.11.12  更新4.4.4版本","values":["1、新增：服务端版本增加：MySQL+SQLite版本，适用于某些3.6版本的服务端；","2、说明：MySQL+SQLite版本对应的【hk4e-emu.db】文件不能是加密的；","3、新增：管理后台每30分钟，检查是否有新版本，如果有新版本将置顶提示；","4、优化：优化商城注册页面某些提示文本不准确的情况；","5、UI优化：大幅优化管理后台“用户管理”-“玩家绑定设置”中各项提示文本；","6、优化：商城注册时，使用新的弹窗模式，确保验证码一定显示；","7、简化：商城注册时，简化多个非必要的参数，减少输入项目；","8、优化：商城启动时，增加：[mysql.ini][gm][case]参数说明，设置注册游戏账号时的大小写校验逻辑；",""]},{"title":"2024.11.9  更新4.4.3版本","values":["1、修复：修复玩家在仓库中，提取资源时报错的问题，此时资源仍可以正常提取；","2、优化：管理后台的“系统维护”中，“游戏端版本切换”不再显示3.2/3.4，而是显示：MySQL+芒果库 / MySQL+MySQL；","3、优化：商城配置文件：mysql.ini的基础设置中，部分参数说明信息及相关逻辑优化；","4、重构：重构了pref参数中limit参数的释义及相关功能逻辑；","5、优化：管理后台部分UI显示内容微调；","6、优化：更明确的错误提示；",""]},{"title":"2024.11.7  更新4.4.2版本","values":["1、修复：修复“福利”-“累充福利”中，某些（自定义类）福利提示已领取，但实际上并未领取的问题；",""]},{"title":"2024.11.6  更新4.4.1版本","values":["1、修复：修复在某些情况下，代理可提现平台币足够，但无法提现的问题；","2、说明：本次升级前如果删除过数据，那么已提现平台币数量将会有差异，但是不影响未提现的平台币数量！",""]},{"title":"2024.11.5  更新4.4.0版本","values":["1、调整：底层授权逻辑改变，4.3.8及以下版本的商城将停止服务；","2、优化：优化注册时验证码的生成与校验逻辑；","3、调整：玩家平台币余额不再强绑定进销存，现在可以随时清理数据了；","4、优化：“核心类的函数”改用redis库唯一锁的功能，避免重放攻击；（旧版本是通过其他方式的实现）","5、调整：代理后台、玩家商城，这两个板块，登录“Token”改为cookie记录，需代理、玩家重新登录；","6、优化：“代理后台”-“收益提现”页面，修正一处文本错误；","7、新增：管理后台的“系统维护”中，新增：“数据清理”功能；","说明：本次更新强制连接redis库！",""]},{"title":"2024.6.1  更新4.3.8版本","values":["01、完善：已完全适配4.3.5版本中第“15”条“指定数据库时区”的功能，可根据实际情况开启；","说明1：当“指定数据库时区”为“+8:00”时，代表为北京时间，每日统计类数据、限购截止时间、代理收益入账时间都会变成北京时间；","说明2：特别关注！修改“指定数据库时区”后，只会针对新产生的数据生效，已有数的据不会有任何变化；","说明3：请重点关注4.3.5及以上的更新日志；",""]},{"title":"2024.5.31  更新4.3.7版本","values":["01、修复：修复管理后台中“营收统计”-“综合营收”报错的问题；","02、警告：由于时区转换问题，导致商城未能完全匹配4.3.5版本第“15”条“指定数据库时区”的功能，所以暂不推荐开启此功能；","03、新增：管理后台的“系统维护”-“设置新特性”中，可以调整代理填写结算信息的模式，微信支付宝或者只能填写USDT钱包地址；","04、修复：当使用“快支付(Kpay)”时，管理后台“日志查看”-“充值回调日志”显示“非法调用”的问题，本次修复只针对新产生的日志有效！",""]},{"title":"2024.5.24  更新4.3.6版本","values":["01、修复：修复4.3.5版本在线直充无法到账的BUG；",""]},{"title":"2024.5.22  更新4.3.5版本(务必更新到4.3.6版本)","values":["01、优化：代码稳定性优化，编译环境更新，管理后台UI加载优化；","02、优化：优化商品图片缓存机制，有效降低网络及流量占用情况；","03、优化：代理推广链接优化，解决在某些情况下玩家注册不到某些代理名下的问题，代理需到后台获取新的推广链接进行推广；","04、调整：代理推广链接的有效性将进行强校验，通过无效推广链接注册的游戏账号，属于无代理的游戏账号（不参与任何返佣计算）；","05、优化：商品增加默认图片逻辑，如需DIY默认图片，替换/root/genshin_shop/wwwroot/admin/upload中的shop.jpeg图片；","06、优化：抽奖增加默认图片逻辑，如需DIY默认图片，替换/root/genshin_shop/wwwroot/admin/upload中的lottery.jpeg图片；","07、新增：商城中：【商城】页面的头部图片、【我的】页面的头部图片，可在管理后台进行上传更换；","08、新增：商城中：【仓库】页面，一次性提取的资源数量可以在管理后台调整，当服务器性能不高或者人数较多，可减少一次性提取的数量，最低：3；","09、新增：商城中：【仓库】页面，将限制单一玩家同时提取资源的数量，可在管理后台调整，当服务器性能不高或者人数较多，可设置此参数，默认：0，0代表无限制；","10、新增：玩家在提取游戏资源或后台清理背包时，与游戏端交互增加超时时间，该参数可在管理后台调整，该参数无推荐值，自行酌情修改，默认：0，0代表没有超时时间；","11、新增：管理后台的“系统维护”中，增加“设置新特性”操作入口，用于设置、修改第“07”、“08”、“09”、“10”条的新增内容；","12、优化：管理后台的“营销管理”-“商城管理”中，增加提示信息框：“避免使用【角色】类的资源”；","13、调整：商城中：【仓库】页面，操作提取时，增加提取游戏资源确认框；","14、新增：管理后台的“用户管理”中，增加“重置玩家仓库资源状态”功能，当某个玩家仓库资源一直在“提取中”时，可以将资源重置为“待提取”状态；","15、新增：可指定数据库时区，默认跟随操作系统，打开/root/genshin_shop/mysql.ini，在[gm]（没有则新建）下新增配置项：time_zone，例如设置东八区，time_zone = +8:00；","16、优化：精简压缩clear.zip、command.zip文件体积；"]},{"title":"说明","values":["说明1：如果需要接入“快支付(Kpay)”或者必须要更新到最新版本，请升级更新，否则不需要更新；","说明2：第“10”条内容，需要更新并解压新的clear.zip、command.zip文件；","说明3：第“12”条中的提示内容，不是商城的问题，而是游戏端自身的限制；","说明4：第“15”条内容，设置time_zone后要重启商城才会生效；","说明5：在线升级可能无效，请通过飞机联系我，获取升级文件及教程；",""]},{"title":"2024.3.20  更新4.3.4版本(不推荐使用)","values":["1、调整：调整三方收款通道调用逻辑；","2、新增：现在可接入“快支付”三方收款平台；","3、优化：使用新环境编译；",""]},{"title":"2023.8.29  更新4.3.3版本(推荐)","values":["1、修复：修复签到类奖励领取时提示：“锁定签到操作失败！”；","2、优化：将某cdn文件改为本地引入，避免出现白屏、无反应的问题；","3、优化：去掉登陆窗口无意义开关；",""]},{"title":"2023.8.19  更新4.3.2版本","values":["1、优化：修复在抽奖中，当随机福利数大于1时，无法抽取到的问题；","2、优化：提高在线直充兼容性；",""]},{"title":"2023.7.31  更新4.3.1版本","values":["1、优化：重新优化网页缓存机制，降低玩家重复访问平台时的带宽占用；",""]},{"title":"2023.7.14  更新4.3.0版本","values":["1、重要更新：提高数据库交互安全性！","2、重构：内部代码优化重构，提升内部效率、完善日志输出；","3、新增：查询授权信息时，增加绑定/解绑操作；","4、优化：查询授权信息时，增加剩余绑定次数显示；","5、优化：提升reservice脚本运行时主程序(main)的运行速度；","6、修复：修复两处处后台端操作失败的问题；","7、修复：修复后台端：“返佣管理”-“返佣查询”中，无法查询到CDK相关的返佣记录。","已验证升级功能正常可用。",""]},{"title":"4.2.9为内部迭代版本，未对外发布。","values":[""]},{"title":"2023.7.1  更新4.2.7版本","values":["1、新增：新增多个手动配置参数，用于玩家注册账号时的逻辑控制，仅永久授权有意义；","2、说明：当前参数默认不需要添加或修改，具体问题具体分析；","3、优化：验证码生成优化，去掉四个字母：o、O、I(大写i)、l(小写L)；","4、优化：后台端多个窗口“简介”项增加显示高度，优化提示文本；","5、新增：后台端左侧列表栏增加“在线公告”功能，与第一次登陆到后台端显示页面一致；","6、优化：在线公告页面底部增加“加群”、“刷新页面”按钮；","7、优化：启动/重启脚本“reservice”中增加提示文本；","8、优化：其他内部代码优化；",""]},{"title":"2023.6.27  更新4.2.6版本","values":["1、优化：后台端：“用户管理”--“调整上级代理”，增加查找功能；",""]},{"title":"2023.6.24  更新4.2.5版本","values":["1、优化：玩家在登陆时，如果只有一个服务器，则直接进行登陆；","2、扩充：启动/重启脚本“reservice”中文件描述符数量由 65535 扩充到 100001；",""]},{"title":"2023.6.15  更新4.2.4版本","values":["1、优化：授权信息获取及校验的内部代码优化；","2、修复：修复后台端中的“基础档案”--“资源档案管理”添加档案时，在某些情况下提示已存在的问题；","3、新增：后台端的“基础档案”中，在“资源档案管理”中增加了“批量导入资源”的功能，该功能仅永久授权可用；","4、新增：后台端的“系统维护”中增加：“设置提现开关”，可设置是否允许代理提现、最低提现金额、手续费等；","5、新增：日志查看中新增：“充值回调日志”，此日志中记录了在线充值渠道回调给本平台的充值结果，可用于故障排查；","6、优化：其他优化；",""]},{"title":"2023.6.10  更新4.2.3版本","values":["1、调整：在线直充内置通道关闭，需服主自行寻找或搭建渠道，推荐自己搭建；","2、优化：优化充值成功后的回调为有序处理，提升一定的效率；",""]},{"title":"2023.6.8  更新4.2.2版本","values":["1、优化：代理发起提现被驳回后，代理可通过“提现类日志”查看驳回理由；","2、优化：其他优化；",""]},{"title":"2023.6.7  更新4.2.1版本","values":["1、调整：“性能参数”配置中的“套接字最大连接数”改为“协程池数量”，相对应的说明文本也进行了同步修改；","2、修复：尝试修复累充福利中，某些类型的福利，苹果浏览器无法领取的问题，此条修复待验证，有问题请反馈；","3、优化：玩家在通过代理链接注册账号时，增加无效字符串“&reg=popover”过滤功能；","4、优化：其他优化；",""]},{"title":"2023.6.5  更新4.2.0版本","values":["1、修复：修复访问中存在的句柄泄漏问题，并确保缓存机制、keep-alive参数正常生效；","2、新增：“性能参数”配置中，增加“Connection”配置项，默认不需要配置；","3、优化：优化“性能参数”配置中的提示文本、验证逻辑；","4、优化：优化后台端：营收统计--充值报表，将赠送部分拆分了出来，报表数据更准确；","5、优化：当游戏端是3.4版本时，不再允许注册含有大写字母的游戏账号，3.2版本仍保持原有逻辑；","6、优化：其他优化；",""]},{"title":"2023.6.3  更新4.1.9版本","values":["1、重要修复：解决由于linux系统限制导致平台经常卡顿的问题，理论上可以支持8000-10000个IP访问，共计65000个连接；","2、重要新增：新增“性能参数”配置命令，可以设置：“套接字最大连接数”、“单账号请求频率限制”，默认不需要配置；","3、重要调整：后台端系统维护中的“重启本平台”功能，不再重启平台，改为：“查看重启命令”，因为一旦平台GG了，本功能也操作不了；",""]},{"title":"2023.6.1  更新4.1.8版本","values":["1、重要调整：限制内部业务逻辑最长超时时间为60秒，避免出现“僵尸”请求，提高平台响应效率；","2、调整：解除代理提现结算设置限制，现在代理可自由编辑自己的提现结算信息(真实姓名、账号、二维码)；","3、新增：后台端：用户管理中，增加“重置用户”密码的功能，可以后台重置代理或玩家的平台登陆密码；","4、优化：提现驳回理由适当开放输入限制，允许输入以下符号：空格、逗号、分号、等号、加号、问号、单引号；","5、优化：玩家累充福利页面，增加“有效的累充平台币”数量显示；","6、优化：修改部分服务器返回内容，释义更准确；",""]},{"title":"2023.5.31  更新4.1.7版本","values":["1、调整：仅向“nohup.out”中写入错误日志，减小“nohup.out”体积；","2、调整：keep-alive限制为60秒，用于释放空闲时间超过1分钟的HTTP连接，减少空闲占用；","3、新增：后台端的系统维护中，增加：“重启本平台”的功能，严重拥堵时可重启平台；","4、重做：后台端数据库交互合并到数据库连接池中，与前端共享数据库连接池；","5、优化：后台端数据库开销优化；","6、优化：其他优化；",""]},{"title":"2023.5.29  更新4.1.6版本","values":["1、新增：增加对3.4游戏端的支持（主要是注册部分）；","2、新增：后台端：系统维护中，增加“游戏端版本切换”，可在3.2与3.4之间切换，本功能仅永久授权可用；","3、优化：同步优化后台端初始化功能、优化玩家绑定设置的提示文本；",""]},{"title":"2023.5.29  更新4.1.5版本","values":["1、调整：重新调整并发性能（优化资源竞争模式、并发模式、编译环境）；","2、说明：本次调整后，系统并发性将有较大的提升，但数据库连接一般会设置50上限，超过将提示“系统繁忙”；","3、优化：后台端部分功能的部分列，增加排序功能，有三角图标提示，点击表头即可进行排序（无需点击三角图标）；","4、优化：后台端删除商品时，修改删除成功后的显示逻辑；",""]},{"title":"2023.5.26  更新4.1.4版本","values":["1、修复：修复后台端无法删除商品的问题；",""]},{"title":"2023.5.24  更新4.1.3版本","values":["1、调整：调整后台端网页缓存机制；","2、新增：后台端：用户管理中增加：“清空指定玩家仓库资源”功能，此功能只清空平台仓库不清理游戏背包，仅永久授权可用；","3、优化：仓库提取资源时增加日志记录，用于记录游戏端的响应情况，可在后台端：日志查看--仓库日志中查看；","4、优化：后台端：营收统计--综合营收中的：CDK充值金额、在线直充金额细分为：实收金额、赠送金额；",""]},{"title":"2023.5.23  更新4.1.2版本","values":["1、重做：重做客户端网页缓存机制，合理节省服务器资源；","2、重做：底层数据库交互逻辑重做，提高响应效率；","3、调整：平台福利中的：清理背包操作改为后台进程模式，此模式下不堵塞平台(提高响应效率)，但是需要等待后台完成清理；","4、修复：玩家端操作“重新登陆”、“切换账号”时，跳转的登陆页面，自动带入代理信息；",""]},{"title":"2023.5.20  更新4.1.1版本","values":["1、重要优化：修复通过平台同步注册游戏账号的时候，出现UID混乱的错误，同时，必须关闭游戏内注册账号的功能；","2、重要调整：只有永久授权才可以通过平台同步创建游戏账号，月卡用户仍沿用4.0.8以前版本的注册逻辑；","有需要关闭游戏内注册账号功能的，私聊离谱2768120553进行关闭。可以避免由于游戏内注册与平台冲突导致UID数据混乱错误的问题！",""]},{"title":"2023.5.19  更新4.1.0版本","values":["1、新增：充值管理中的：批量生成CDK、在线直充管理中，增加“充赠比”功能，用于手动做促销活动，注意：本功能仅永久授权有效；","2、说明：假设设置“充赠比”为1.5，玩家充值6元按9元的平台币进行充值，但是代理返佣仍按6元计算；","3、重大调整：本平台内所有购买、领取到的资源/道具全部暂存在仓库中，需要玩家再到仓库统一提取；","4、重大调整：仓库提取操作改为后台进程模式，此模式下不堵塞平台(提高响应效率)，但是需要等待后台完成提取，这将需要一点的时间；","5、调整：仓库一次性提取数量由10增加至20；","6、UI优化：部分提示文本优化；","7、修复：修复已知问题；",""]},{"title":"2023.5.18  更新4.0.9版本","values":["1、优化：玩家注册账号时，如果游戏账号不存在，系统自动注册，此时需要玩家登陆一次游戏，才能继续使用本平台；","2、优化：交互逻辑优化，商城购买不再将资源发送到游戏中，而是直接放在仓库中；","3、调整：玩家注册账号时，增加验证码验证环节；",""]},{"title":"2023.5.18  更新4.0.8版本","values":["1、新增：后台端新增自定义批量导入功能，基础档案中的：GM脚本管理+签到奖励管理，营销管理中的：商城管理+抽奖管理+VIP等级管理，可以快速导入明细脚本；","2、修复：修复日志查询中，收益返佣对应的的平台币数量不准确的问题(本问题不影响其他报表，修复后历史数据仍不准确)；","3、修复：修复注册账号时，由于大小写问题，提示该游戏账号被绑定的问题；","4、修复：修复用户管理中，修改上级代理出现错误的问题","5、优化：玩家端商城页面增加搜索功能；","6、完善：后台端完善了邮件服务器设置，服主设置了SMTP参数后，玩家可在登陆页面--忘记密码中切换到获取邮件功能中，通过邮箱找回账号和重置密码；",""]},{"title":"2023.5.17  更新4.0.7版本","values":["1、新增：付费抽奖增加十连抽功能，可以在抽奖档案中设置十连抽的价格，如果不设置，则按单抽价格*10进行扣费；","2、新增：用户管理中，增加调整VIP等级、调整上级代理的功能；","3、新增：用户管理中，增加封禁游戏UID，解封游戏UID功能；","4、优化：后台端抽奖档案中，解除所有奖品中奖率之和=100的限制；","5、优化：用户管理中，封禁账号可同时封禁游戏UID，解封时自动解封游戏UID",""]},{"title":"2023.5.16  紧急更新4.0.6版本","values":["1、修复：修复无法绑定中文游戏账号的问题；","2、优化：支付回调内部逻辑优化；","3、优化：客户端网页缓存机制；",""]},{"title":"2023.5.15  更新4.0.5版本","values":["1、完善：后台端的“返佣管理”、“营收统计”、“日志查看”已完善；","2、UI优化：后台端添加资源脚本时，添加武器时可以自定义突破等级、精炼等阶","3、UI优化：登陆后台端后，在线公告里面增加：“查看更新日志”功能；","4、优化：后台端CDK生成时增加是否参与返佣的选项；","5、优化：数据库层面手动设置玩家VIP等级后，玩家充值时不会掉等级；","6、优化：代理后台“我的”页面，增加玩家数量信息展示；","7、修复：修复已知问题","8、优化：内部代码优化",""]},{"title":"2023.5.13  更新4.0.4版本","values":["1、福利优化：增加功能，目前福利有：免费商城、平台福利、累充福利","2、UI优化：商城里面不再显示特价为0的商品，请在福利--免费商城中查看","3、累充福利小重做：除了现有的一次性福利，还增加自定义福利功能，可以自行设置福利池，并设置几选几；",""]},{"title":"2023.5.13  更新4.0.3版本","values":["1、UI优化：商城商品价格显示优化","2、抽奖优化：最多可设置16个奖品，增加随机福利池，中奖时随机获得福利池中的某几个资源",""]},{"title":"2023.5.11 更新4.0.2版本","values":["1、商城商品优化：增加几选功能，可以实现：例如售卖角色5选1的商品",""]},{"title":"2023.5.11 更新4.0.1版本","values":["1、修复：在线直充无法回调问题；","2、返佣功能调整：自定义下级代理返佣比例；","",""]},{"title":"2023.5.9  发布4.0.0版本","values":["发布全新的商城平台"]}]}